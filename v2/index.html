<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soccer Time Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <h1 id="team-title">Soccer Time Tracker</h1>
        <div class="clock-display" id="quarter-clock">0:00</div>
        <div class="sound-toggle" onclick="toggleSound()">
            <span id="sound-status">üîä</span>
        </div>
    </div>

    <div class="controls">
        <div class="controls-header">
            <h3 style="margin: 0; color: #667eea;">Controls</h3>
            <button class="collapse-toggle" onclick="toggleControls()" id="collapse-toggle">üîº</button>
        </div>

        <div class="collapsible-content" id="collapsible-content">
            <div class="control-row">
                <label for="rotation">Rotation time:</label>
                <input type="number" id="rotation" value="5" min="1">
            </div>

            <div class="control-row">
                <label for="team-select">Team:</label>
                <select id="team-select" onchange="loadSelectedTeam()">
                    <option value="">Select Team</option>
                </select>
            </div>

            <div class="control-row">
                <label for="captain-select">Captain:</label>
                <select id="captain-select" onchange="updatePlayerDisplay()">
                    <option value="">None</option>
                </select>
            </div>

            <div class="clock-controls">
                <button onclick="showManagePlayersModal()">üë• Manage Players</button>
                <button onclick="createTeam()">‚ûï Create Team</button>
            </div>

            <div class="clock-controls">
                <button onclick="showResetWarning()">üîÑ Reset Times</button>
                <button onclick="showManageGoalsModal()">‚öΩ Manage Goals</button>
                <button class="share-button" onclick="showShareModal()">üîó Share Team</button>
            </div>
        </div>

        <label>Select Quarter:</label>
        <div class="quarter-selector" id="quarter">
            <button data-quarter="Q1" class="quarter-button active">Q1</button>
            <button data-quarter="Q2" class="quarter-button">Q2</button>
            <button data-quarter="Q3" class="quarter-button">Q3</button>
            <button data-quarter="Q4" class="quarter-button">Q4</button>
            <button data-quarter="OT" class="quarter-button">OT</button>
        </div>

        <div class="clock-controls">
            <button class="start-button" onclick="startQuarterClock()">‚ñ∂ Start Clock</button>
            <button class="stop-button" onclick="stopQuarterClock()">‚è∏ Stop Clock</button>
        </div>
    </div>

    <div class="players-grid" id="players"></div>

    <div class="history-section">
        <h2>Rotation History</h2>
        <div id="rotation-log"></div>
    </div>

    <div class="history-section">
        <h2>Goals</h2>
        <div id="goals-log"></div>
    </div>

    <div class="goal-section">
        <div class="score-display">
            <span class="team-score" id="team-score">Team: 0</span>
        </div>
        <button class="goal-button" onclick="showGoalModal()">‚öΩ GOAL!</button>
        <div class="score-display">
            <span class="other-score" id="other-score">Other: 0</span>
        </div>
    </div>

    <!-- Manage Players Modal -->
    <div id="manage-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                Manage Players
            </div>
            <div class="modal-body">
                <div class="add-player-row">
                    <input type="text" id="new-player-name" placeholder="Enter player name">
                    <button onclick="addPlayerFromModal()">‚ûï Add</button>
                </div>
                <div class="player-list" id="player-list"></div>
            </div>
            <div class="modal-footer">
                <button onclick="savePlayersFromModal()">‚úÖ Save</button>
                <button onclick="closeManageModal()" style="background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Goal Scorer Modal -->
    <div id="goal-modal" class="modal goal-modal">
        <div class="modal-content">
            <div class="modal-header">
                Who Scored?
            </div>
            <div class="modal-body">
                <select id="goal-scorer">
                    <option value="">Select Player</option>
                </select>
                <div style="margin-top: 20px;">
                    <label>
                        <input type="radio" name="goal-team" value="team" checked> Our Team
                    </label>
                    <label style="margin-left: 20px;">
                        <input type="radio" name="goal-team" value="other"> Other Team
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="recordGoal()">‚úÖ Record Goal</button>
                <button onclick="closeGoalModal()" style="background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Manage Goals Modal -->
    <div id="manage-goals-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                Manage Goals
            </div>
            <div class="modal-body">
                <div class="goals-list" id="goals-list"></div>
            </div>
            <div class="modal-footer">
                <button onclick="closeManageGoalsModal()" style="background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit Goal Modal -->
    <div id="edit-goal-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                Edit Goal
            </div>
            <div class="modal-body">
                <select id="edit-goal-scorer">
                    <option value="">Select Player</option>
                </select>
                <div style="margin-top: 20px;">
                    <label>
                        <input type="radio" name="edit-goal-team" value="team" id="edit-team-radio"> Our Team
                    </label>
                    <label style="margin-left: 20px;">
                        <input type="radio" name="edit-goal-team" value="other" id="edit-other-radio"> Other Team
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="saveEditedGoal()">‚úÖ Save</button>
                <button onclick="closeEditGoalModal()" style="background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Reset Warning Modal -->
    <div id="reset-warning-modal" class="modal">
        <div class="modal-content warning-modal">
            <h3>‚ö†Ô∏è Warning!</h3>
            <p>Resetting will clear out the rotation history as well as the goals history.</p>
            <p>Are you sure you want to do this?</p>
            <div class="modal-footer">
                <button onclick="confirmReset()" style="background: linear-gradient(135deg, #f857a6 0%, #ff5858 100%);">Yes, Reset Everything</button>
                <button onclick="closeResetWarning()" style="background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Import Data Modal -->
    <div id="import-modal" class="modal">
        <div class="modal-content import-modal">
            <h3>üì• Import Team Data</h3>
            <p>You're about to import team data that was shared with you.</p>
            <p>This will overwrite your current data for this team.</p>
            <p>Do you want to continue?</p>
            <div class="modal-footer">
                <button onclick="confirmImport()">Yes, Import</button>
                <button onclick="cancelImport()" style="background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="modal">
        <div class="modal-content share-modal">
            <h3>üîó Share Team Data</h3>

            <div class="share-options">
                <h4>Select what to share:</h4>
                <div class="share-option" style="display:none">
                    <input type="checkbox" id="share-players" checked disabled>
                    <label for="share-players">Players and Captain (always included)</label>
                </div>
                <div class="share-option">
                    <input type="checkbox" id="share-times" checked>
                    <label for="share-times">Player Clocks</label>
                </div>
                <div class="share-option">
                    <input type="checkbox" id="share-rotation" checked>
                    <label for="share-rotation">Rotation History</label>
                </div>
                <div class="share-option">
                    <input type="checkbox" id="share-goals" checked>
                    <label for="share-goals">Goal History</label>
                </div>
                <div class="share-option">
                    <input type="checkbox" id="share-quarters" checked>
                    <label for="share-quarters">Quarter Clocks</label>
                </div>
            </div>
	    <p>Player roster always included in sharing link</p>

            <button onclick="generateShareUrl()" style="width: 100%; margin-top: 15px; margin-bottom: 15px;">Generate Share Link</button>

            <div id="share-url-container" style="display: none;">
                <p>Share this link with others:</p>
                <div class="share-url" id="share-url"></div>
                <p><b>RECOMMENDATION</b>: these links tend to be long and might require a URL shortener like <a href="https://tinyurl.com/" target="_blank">tinyurl.com</a> to make a short enough link to share through text messaging.</p>

                <div class="modal-footer">
                    <button class="copy-button" onclick="copyShareUrl()">üìã Copy Link</button>
                </div>
            </div>

            <div class="modal-footer">
                <button onclick="closeShareModal()" style="background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);">Close</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
